(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],d=0,f=[];d<s.length;d++)o=s[d],r[o]&&f.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vue-data-board/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"01c5":function(t,e,a){"use strict";a.r(e);var n=a("0888"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"046c":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac6a"),a("7f7f");var r=n(a("313e"));a("817d");var i={props:{data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},validateData:function(t){Array.isArray(t)||this.$message({message:"线图的数据格式必须为数组，请检查你的数据格式"})},renderChart:function(t){var e=this;if(this.$refs.chart){var a=[],n={};0===this.schema.filter(function(t){return t.asxAxis}).length?(n={name:"",type:"pie",radius:"55%",center:["50%","60%"],data:[],tooltip:{formatter:function(t){return"".concat(t.name,": ").concat(t.percent,"%")}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},t=t[0],this.schema.forEach(function(e,r){a.push(e.name),n.data[r]=n.data[r]||{},n.data[r].name=e.name,n.data[r].value=t[e.name]})):(n={name:"",type:"pie",radius:"55%",center:["50%","40%"],data:[],tooltip:{formatter:function(t){return"".concat(t.name,": ").concat(t.percent,"%")}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},this.schema.forEach(function(e,r){t.forEach(function(t,r){n.data[r]=n.data[r]||{},e.asxAxis?(a.push(t[e.name]),n.data[r].name=t[e.name]):n.data[r].value=t[e.name]})}));var i={legend:{type:"scroll",data:a,bottom:0},toolbox:{show:!0,itemSize:12,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"80px",right:"0",bottom:"45px"},tooltip:{trigger:"item"},series:[n]};setTimeout(function(){e.chart||(e.chart=r.default.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(i),e.chartOpt&&e.chart.setOption(e.chartOpt)},0)}}}};e.default=i},"0652":function(t,e,a){"use strict";var n=a("231f"),r=a.n(n);r.a},"067a":function(t,e,a){"use strict";a.r(e);var n=a("abbf"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"0888":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("7514");var r=n(a("bc26")),i=n(a("0e93")),o=n(a("7932")),s=n(a("49e0")),l=n(a("ec4a")),c=n(a("8628")),u=n(a("d230")),d=n(a("f0ee")),f={components:{lineChart:r.default,DataTable:i.default,BarChart:o.default,StackBarChart:s.default,PieChart:c.default,HorizontalBar:l.default},props:{data:{type:Array,required:!0},schema:{type:Array,required:!0},chartStyle:{require:!1,type:Object},chartType:{type:String,default:"table"},isEditMode:{type:Boolean,default:!0}},data:function(){return{chartTypeList:u.default}},computed:{allSelected:function(){return d.default.state.caculCols.concat(d.default.state.dimensions)},chartData:function(){return this.currentType.dataTransfer?this.currentType.dataTransfer(this.data,this.schema):this.data},currentType:function(){var t=this;return u.default.find(function(e){return e.type===t.chartType})}},watch:{allSelected:{deep:!0,handler:function(){this.currentType.matchRule.isUsable(d.default.state.dimensions,d.default.state.caculCols)||this.$emit("update:chartType","table")}}},methods:{isUsable:function(t){return t.matchRule.isUsable(d.default.state.dimensions,d.default.state.caculCols)},switchChartType:function(t){t.matchRule.isUsable(d.default.state.dimensions,d.default.state.caculCols)&&this.$emit("update:chartType",t.type)}}};e.default=f},"0c66":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("ce25")),i=a("5fd4"),o={components:{dashboardItem:r.default},data:function(){return{currentDashboard:void 0}},created:function(){var t=this;console.log(this.$route.params.id),(0,i.getdDashboardById)(this.$route.params.id).then(function(e){t.currentDashboard=e.data})}};e.default=o},"0e93":function(t,e,a){"use strict";a.r(e);var n=a("fb0f"),r=a("e3a5");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"0f9a":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("5f87"),r={state:{token:(0,n.getToken)(),avatar:"https://wpimg.wallstcn.com/3fce7247-d863-4e3d-a0de-d30aaef7358a"},mutations:{SET_TOKEN:function(t,e){t.token=e}},actions:{Login:function(t,e){var a=t.commit;return new Promise(function(t,r){a("SET_TOKEN",e),(0,n.setToken)(e),t()})},FedLogOut:function(t){var e=t.commit;return new Promise(function(t){e("SET_TOKEN",""),(0,n.removeToken)(),t()})}}},i=r;e.default=i},1:function(t,e,a){t.exports=a("56d7")},1003:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[{element:"#dataPanel",popover:{title:"数据面板",description:"这里是数据源以及数据源的字段列表，你可以在这里切换数据源、将字段拖拽到数据查询面板进行查询",position:"right"}},{element:"#formPanel",popover:{title:"数据查询面板",description:"这里进行数据查询，你可以在这里构建、调整查询语句，实现对数据的查询",position:"bottom"}},{element:"#dimensionInput",popover:{title:"维度编辑",description:"维度是指数据归纳的角度，如时间维度、类别维度等，维度一般不宜超过 2 个",position:"top"}},{element:"#fieldInput",popover:{title:"字段编辑",description:"字段是指查询数据的内容，如个数、总和等，字段可以有多个，但是不宜过多以免影响可视化效果",position:"bottom"}},{element:"#vizPanel",popover:{title:"可视化面板",description:"这里是可视化面板，可以在此对数据进行可视化，选择不同的图表类型和样式等等",position:"top"}}],r=n;e.default=r},1184:function(t,e,a){"use strict";var n=a("b729"),r=a.n(n);r.a},"199c":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("02fa")),i=a("2f62"),o={name:"App",computed:(0,r.default)({},(0,i.mapGetters)(["avatar","token"]),{defaultActive:function(){return console.log(this.$route.path),this.$route.path},activeMenu:function(){var t=this.$route,e=t.meta,a=t.path;return e.activeMenu||a}}),methods:{logout:function(){this.$store.dispatch("FedLogOut").then(function(){location.reload()})},showNavBar:function(){return-1===this.$route.path.indexOf("fullscreen")}}};e.default=o},"1c1e":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("bc3a")),i=a("5c96"),o=n(a("a78e")),s=n(a("4360")),l=r.default.create({baseURL:"https://dongsuo.avosapps.us"});l.interceptors.request.use(function(t){return s.default.getters.token&&(t.headers["DS-Token"]=o.default.get("DS-Token")),t},function(t){console.log(t),Promise.reject(t)}),l.interceptors.response.use(function(t){var e=t.data;return 2e4!==e.code?(429===e.code?(0,i.Message)({message:"请求过于频繁，请稍后再试",type:"error",duration:5e3}):(0,i.Message)({message:e.message,type:"error",duration:5e3}),40003===e.code?i.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){s.default.dispatch("FedLogOut").then(function(){location.reload()})}):console.log("err:"+u(t)),Promise.reject("request error")):t.data},function(t){return console.log("err:"+t),(0,i.Message)({message:t.message,type:"error",duration:5e3}),Promise.reject(t)});var c=l;function u(t){var e={url:t.request&&t.request.responseURL,res:t.request&&t.request.response};return JSON.stringify(e)}e.default=c},"1c3a":function(t,e,a){"use strict";a.r(e);var n=a("661c"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"1d04":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("28a5");var r=n(a("e54b"));a("7514"),a("a481");var i=n(a("310e")),o=n(a("c24c"));a("01d7");var s=n(a("46d5")),l=n(a("72a3")),c=n(a("edf6")),u=n(a("f986")),d=a("c638"),f=a("5fd4"),h=n(a("f77d")),m=a("ed08"),p=a("a5e0"),v=n(a("1003")),b=n(a("f0ee")),y=new o.default,g={name:"ChartPanel",components:{visualizePanel:c.default,dataPanel:u.default,draggable:i.default,filterPanel:s.default,orderPanel:l.default},data:function(){return{loading:!1,result:[],dataSrc:void 0,limit:200,orderByStrs:[],filterStr:void 0,editLimit:!1,currentFilters:[],sharedState:b.default.state,chartType:"table",chartName:void 0,chartDesc:void 0,showMyCharts:!1,myChartList:[],showDashboards:!1,dashboardList:[],selectedDb:void 0}},computed:{allSelected:function(){return b.default.state.dimensions.concat(b.default.state.caculCols)},sqlSentence:function(){return(0,p.buildSqlSentence)({dataSrc:this.dataSrc,selectedCalcul:this.sharedState.caculCols,selectedDimension:this.sharedState.dimensions,orderByStrs:this.orderByStrs,filterStr:this.filterStr,limit:this.limit})}},watch:{sqlSentence:function(t){t?this.fetchData(t):this.result=[]},"$route.params.id":{immediate:!0,handler:function(){var t=this;"create"!==this.$route.params.id?(this.getDbByChart(this.$route.params.id),(0,d.getChartById)(this.$route.params.id).then(function(e){var a=e.data;t.chartName=a.chart_name,t.chartDesc=a.desc;var n=a.content||{};t.dataSrc=n.dataSrc,t.chartType=n.chartType,t.limit=n.limit||200,t.currentFilters=n.filters,t.orderByStrs=n.orderByStrs,b.default.setCaculColsAction(n.selectedCalcul),b.default.setDimensionsAction(n.selectedDimension),t.$refs.dataPanel.initWithDataSrc(t.dataSrc)})):(this.chartName=void 0,this.chartDesc=void 0,b.default.setCaculColsAction([]),b.default.setDimensionsAction([]),this.$nextTick(function(){t.$refs.dataPanel.initWithDataSrc()}))}}},methods:{fetchData:function(t){var e=this;this.loading=!0,(0,h.default)(t).then(function(t){e.loading=!1,e.result=t.data})},handleDataSrcChange:function(t){this.dataSrc=t,b.default.setCaculColsAction([]),b.default.setDimensionsAction([]),this.filterStr=void 0,this.orderByStrs=[]},handleColChange:function(t){t.added&&b.default.addCaculColAction(t.added.element)},handleDimensionChange:function(t){t.added&&b.default.addDimensionAction(t.added.element)},handleCloseColTag:function(t){b.default.deleteCaculColAction(t)},handleCloseDimensionTag:function(t){b.default.deleteDimensionAction(t)},handleAddFilter:function(t){this.filterStr=t},handleSave:function(){var t=this;if(this.chartName){var e="create"===this.$route.params.id?void 0:this.$route.params.id,a={dataSrc:this.dataSrc,orderByStrs:this.orderByStrs,limit:this.limit,selectedCalcul:this.sharedState.caculCols,selectedDimension:this.sharedState.dimensions,chartType:this.chartType,filters:this.currentFilters},n={id:e,chart_name:this.chartName,desc:this.chartDesc,content:a};e?(0,d.updateChart)(n).then(function(e){t.$message({type:"success",message:"保存成功！"})}):(0,d.createChart)(n).then(function(e){t.$router.replace("/chartpanel/".concat(e.data.id)),t.$message({type:"success",message:"保存成功！"})})}else this.$message({type:"warning",message:"保存失败，请输入图表名称"})},handleLinkDB:function(){var t=this;this.showDashboards=!0,(0,f.dashboardList)().then(function(e){t.dashboardList=e.data.dashboards})},getDbByChart:function(t){var e=this;(0,f.dbByChart)(t).then(function(t){e.linkedDbList=t.data})},isDbDisbaled:function(t){return!!this.linkedDbList.find(function(e){return e.objectId===t.objectId})},linkDb:function(){var t=this,e={chart_id:this.$route.params.id,dashboard_id:this.selectedDb};this.showDashboards=!1,(0,f.addChartToDB)(e).then(function(e){t.getDbByChart(t.$route.params.id),t.$message({type:"success",message:"添加成功！"})})},viewAllChart:function(){var t=this;this.showMyCharts=!0,(0,d.chartList)().then(function(e){t.myChartList=e.data})},switchChart:function(t){var e=this;this.$confirm("确定要离开当前页面吗?系统可能不会保存您所做的更改。","提示").then(function(){e.$router.replace("/chartpanel/".concat(t.chart_id)),e.showMyCharts=!1})},deleteChart:function(t){var e=this;this.$confirm("确定要删除图表：".concat(t.chart_name,"？"),"提示").then(function(){console.log(t),(0,d.deleteChart)({id:t.chart_id}).then(function(){e.viewAllChart(),e.$message({type:"success",message:"删除成功！"})})})},handleHelp:function(t){console.log(t),"guide"===t&&(y.defineSteps(v.default),y.start())},handleDownload:function(){var t=this;Promise.resolve().then(function(){return(0,r.default)(a("4bf8d"))}).then(function(e){var a=t.allSelected.map(function(t){return t.Column}),n=a,r=t.formatJson(n,t.result);e.export_json_to_excel({header:a,data:r,filename:"DataExport"+(0,m.parseTime)(Date.now(),"{m}{d}{h}{i}{s}"),autoWidth:!0})})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){var a=t.split(".");return a.length<=1?e[t]:a.reduce(function(t,e){return t[e]?t[e]:"--"},e)})})}}};e.default=g},"1e4b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("img",{attrs:{src:a("cf05")}}),n("h1",[t._v("A Data Analysis Board in Vue.")]),n("el-button",{attrs:{type:"success",size:"large"},on:{click:function(e){return t.$router.push("/chartpanel/create")}}},[t._v("\n    Get Start\n  ")])],1)},r=[],i=(a("7ff0"),a("2877")),o={},s=Object(i["a"])(o,n,r,!1,null,"81e3023a",null);e["default"]=s.exports},"1fac":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},2:function(t,e){},2153:function(t,e,a){"use strict";var n=a("ac0d"),r=a.n(n);r.a},"231f":function(t,e,a){},"23be":function(t,e,a){"use strict";a.r(e);var n=a("199c"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"26a5":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("8615"),a("7514"),a("7f7f"),a("ac6a");var r=n(a("313e"));a("817d");var i={props:{widgetMeta:{required:!1,type:Object,default:function(){}},data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},validateData:function(t){Array.isArray(t)||this.$message({message:"线图的数据格式必须为数组，请检查你的数据格式"})},renderChart:function(t){var e=this;if(this.$refs.chart){if(0===t.length&&this.chart)return this.chart.clear(),void this.chart.setOption({graphic:[{type:"group",left:"center",top:"center",children:[{type:"text",z:100,left:"center",top:"middle",style:{fill:"#333",text:this.noDataDesc,font:"14px Microsoft YaHei"}}]}]});var a=[],n=[],i={};this.schema.forEach(function(e,r){a.push(e.label||e.name),e.asxAxis||(i[e.name]={name:e.label||e.name,data:[],type:"bar"}),t.forEach(function(t){e.asxAxis?n.push(t[e.name]):i[e.name].data.push(t[e.name])})});var o={legend:{data:a},toolbox:{show:!0,feature:{saveAsImage:{show:!0},myBarChart:{show:!0,title:"饼图",icon:"path://M27.255467 459.8016A27.2128 27.2128 0 0 0 0 487.005867v508.023466a27.2128 27.2128 0 0 0 27.255467 27.204267H276.138667a27.2128 27.2128 0 0 0 27.264-27.204267V486.997333a27.2128 27.2128 0 0 0-27.264-27.204266H27.255467z m221.627733 508.023467H54.2976V513.988267h194.5856v453.8368zM389.393067 27.195733C389.393067 12.168533 401.578667 0.2304 416.426667 0h249.105066a27.2128 27.2128 0 0 1 27.264 27.204267v967.825066a27.2128 27.2128 0 0 1-27.264 27.204267H416.648533a27.2128 27.2128 0 0 1-27.255466-27.204267V27.204267z m54.2976 27.2128v913.6384h194.5856V54.408533H443.690667z m611.012266 967.594667v0.2304H805.819733a27.2128 27.2128 0 0 1-27.264-27.204267V343.031467a27.2128 27.2128 0 0 1 27.264-27.204267h248.8832a27.2128 27.2128 0 0 1 27.255467 27.204267v651.776a27.2128 27.2128 0 0 1-27.255467 27.204266z m-221.627733-651.776v597.819733h194.5856V370.235733H833.0752z",onclick:function(){e.renderChart(e.data)}},myPieChart:{show:!0,title:"饼图",icon:"path://M902.573115 538.712435l60.111478 4.035763C946.843521 778.856364 748.861121 963.768529 511.970002 963.768529 262.851599 963.768529 60.231471 761.148401 60.231471 512.029998c0-235.205218 183.526247-433.066625 417.888514-450.473605l4.456739 60.051482C279.535621 136.665992 120.463942 308.145945 120.463942 512.029998c0 215.870351 175.635709 391.50706 391.50606 391.50706 205.329969 0 376.869918-160.216612 390.603113-364.824623zM1023.940004 451.737531v30.116235l-30.176232 1.02394h-450.653595V0L573.286409 0.059996C821.801848 0.601965 1023.940004 203.282089 1023.940004 451.737531z m-61.075422-29.091295C949.434369 231.711423 795.661379 76.735504 603.341648 61.556393v361.088843H962.863582z",onclick:function(){var t=e.schema.find(function(t){return t.asxAxis}).name,a=e.schema.find(function(t){return!t.asxAxis}).name,n=e.data.map(function(e){var n={name:e[t],value:e[a]};return n});e.chart.setOption({legend:{show:!0,data:n.map(function(t){return t.name}),bottom:0},xAxis:{show:!1},yAxis:{show:!1,silent:!0},tooltip:{trigger:"item",axisPointer:{type:"none"}},series:[{type:"pie",radius:"65%",center:["50%","47%"],data:n,label:{formatter:"{b}: {d}%"},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}},restore:{show:!0},dataZoom:{show:!1}}},grid:{top:"10%",left:"80px",bottom:"10%",right:"20px"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"value",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}}},yAxis:{type:"category",data:n,axisLabel:{show:!0,color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(i)};setTimeout(function(){e.chart||(e.chart=r.default.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(o),e.chartOpt&&e.chart.setOption(e.chartOpt)},0)}}}};e.default=i},"2a60":function(t,e,a){"use strict";var n=a("48e6"),r=a.n(n);r.a},3:function(t,e){},"30e0":function(t,e,a){"use strict";var n=a("38c7"),r=a.n(n);r.a},"315c":function(t,e,a){},3222:function(t,e,a){"use strict";a.r(e);var n=a("b4a8"),r=a("d063");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("2153");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"5ff1ae81",null);e["default"]=s.exports},3839:function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-horizontal_bar",use:"icon-horizontal_bar-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-horizontal_bar"><defs><style type="text/css"></style></defs><path d="M496.398222 129.292929l0 147.105616-323.635717 0L172.762505 129.292929z" fill="#29C287" p-id="1978" /><path d="M894.249374 335.614707l0 147.106909-676.692041 1e-8L217.557333 335.614707z" fill="#706EE7" p-id="1979" /><path d="M614.085818 541.191758l0 147.105616-441.323313 0L172.762505 541.191758z" fill="#29C287" p-id="1980" /><path d="M732.661657 129.292929l0 147.104324-235.37389899 0L497.287758 129.292929z" fill="#706EE7" p-id="1981" /><path d="M614.575838 335.616l0 147.10561601L173.252525 482.721616 173.252525 335.616z" fill="#29C287" p-id="1982" /><path d="M682.640808 540.902141L682.640808 688.006465l-235.373899 0L447.266909 540.902141z" fill="#706EE7" p-id="1983" /><path d="M612.822626 745.015596L612.822626 892.121212l-441.323313 0L171.499313 745.015596z" fill="#29C287" p-id="1984" /><path d="M692.984242 745.015596l1e-8 147.104323-235.37389901 0L457.610343 745.01559599z" fill="#706EE7" p-id="1985" /></symbol>'});o.a.add(s);e["default"]=s},"38c7":function(t,e,a){},"3dfd":function(t,e,a){"use strict";a.r(e);var n=a("f311"),r=a("23be");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("5c0b");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},4140:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"排序"}},[a("draggable",{staticStyle:{display:"inline-block"},attrs:{group:{name:"orderBy",pull:!1,put:!1}},model:{value:t.orderByStrs,callback:function(e){t.orderByStrs=e},expression:"orderByStrs"}},t._l(t.orderByStrs,function(e,n){return a("el-tag",{key:n,attrs:{closable:"",size:"small"},on:{close:t.handleCloseOrderBy}},[t._v("\n      "+t._s(e)+"\n    ")])}),1),a("el-cascader",{staticStyle:{width:"120px"},attrs:{options:t.orderByOption,disabled:0===t.orderByOption.length,size:"mini",placeholder:"选择排序方式"},on:{change:t.handleOrderByChange},model:{value:t.orderBy,callback:function(e){t.orderBy=e},expression:"orderBy"}})],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},4360:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("2b0e")),i=n(a("2f62")),o=n(a("0f9a")),s=n(a("94d5"));r.default.use(i.default);var l=new i.default.Store({modules:{user:o.default},getters:s.default}),c=l;e.default=c},4685:function(t,e,a){"use strict";a.r(e);var n=a("484c"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"46d5":function(t,e,a){"use strict";a.r(e);var n=a("6d46"),r=a("4685");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("1184");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"b59009fe",null);e["default"]=s.exports},"484c":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("28a5"),a("7f7f"),a("20d6"),a("7514");var r=a("aa35"),i=a("a5e0"),o=n(a("f0ee")),s={props:{disabled:{default:!1}},data:function(){return{visible:!1,filterOperatorOpts:r.filterOperator,filterStrs:[],filteCol:void 0,filterOperator:void 0,value1:void 0,value2:void 0,value3:void 0,arrValue:[],currentFilters:[],sharedState:o.default.state}},computed:{currentOperatorParamNum:function(){var t=this,e=r.filterOperator.find(function(e){return e.operator===t.filterOperator});return e?e.paramNum:1}},methods:{handleClosefilter:function(t){this.currentFilters.splice(t,1),this.handleSubmit()},handleEditFilter:function(t){this.visible=!0,this.filteCol=t.filteCol,this.filterOperator=t.filterOperator,this.value1=t.value.value1,this.value2=t.value.value2,this.arrValue=t.value.arrValue},handleAdd:function(){this.arrValue.push(this.value3),this.value3=void 0},handleRemove:function(t){this.arrValue.splice(this.arrValue.indexOf(t),1)},handleConfirm:function(){var t=this;if(this.filteCol&&this.filterOperator){var e={filteCol:this.filteCol,colType:this.sharedState.allCols.find(function(e){return e.Column===t.filteCol}).Type,filterOperator:this.filterOperator,value:{value1:this.value1,value2:this.value2,arrValue:this.arrValue},operatorParamNum:this.operatorParamNum(this.filterOperator)},a=this.currentFilters.findIndex(function(e){return e.filteCol===t.filteCol&&e.filterOperator===t.filterOperator});a>=0?this.currentFilters.splice(a,1,e):this.currentFilters.push(e),this.handleSubmit()}else this.$message({type:"warning",message:"筛选字段和筛选方式不可为空"})},handleSubmit:function(){var t=this.currentFilters.map(i.buildFilterSentence);this.$emit("change",t.join(" and ")),this.$emit("update: filters",this.currentFilters),this.visible=!1},generateFilterSentence:function(t){return(0,i.buildFilterSentence)(t)},operatorParamNum:function(t){var e=r.filterOperator.find(function(e){return e.operator===t});return e?e.paramNum:1},needQuotation:function(t){var e=this.sharedState.allCols.find(function(e){return e.Column===t}).Type;return e.indexOf("(")>=0?r.dataType.find(function(t){return t.name===e.split("(")[0].toLowerCase()}).needQuotation:r.dataType.find(function(t){return t.name===e.toLowerCase()}).needQuotation},addQuotation:function(t){return{value1:"'".concat(t.value1,"'"),value2:"'".concat(t.value2,"'"),arrValue:t.arrValue.map(function(t){return"'".concat(t,"'")})}}}};e.default=s},"48b4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"48e6":function(t,e,a){},"49e0":function(t,e,a){"use strict";a.r(e);var n=a("91d2"),r=a("e7eb");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"4bf8d":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.export_table_to_excel=d,e.export_json_to_excel=f,a("6b54"),a("ac6a");var r=n(a("4db1"));a("34ef");var i=n(a("1146"));function o(t){for(var e=[],a=t.querySelectorAll("tr"),n=[],r=0;r<a.length;++r){for(var i=[],o=a[r],s=o.querySelectorAll("td"),l=0;l<s.length;++l){var c=s[l],u=c.getAttribute("colspan"),d=c.getAttribute("rowspan"),f=c.innerText;if(""!==f&&f==+f&&(f=+f),n.forEach(function(t){if(r>=t.s.r&&r<=t.e.r&&i.length>=t.s.c&&i.length<=t.e.c)for(var e=0;e<=t.e.c-t.s.c;++e)i.push(null)}),(d||u)&&(d=d||1,u=u||1,n.push({s:{r:r,c:i.length},e:{r:r+d-1,c:i.length+u-1}})),i.push(""!==f?f:null),u)for(var h=0;h<u-1;++h)i.push(null)}e.push(i)}return[e,n]}function s(t,e){e&&(t+=1462);var a=Date.parse(t);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function l(t,e){for(var a={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=t.length;++r)for(var o=0;o!=t[r].length;++o){n.s.r>r&&(n.s.r=r),n.s.c>o&&(n.s.c=o),n.e.r<r&&(n.e.r=r),n.e.c<o&&(n.e.c=o);var l={v:t[r][o]};if(null!=l.v){var c=i.default.utils.encode_cell({c:o,r:r});"number"===typeof l.v?l.t="n":"boolean"===typeof l.v?l.t="b":l.v instanceof Date?(l.t="n",l.z=i.default.SSF._table[14],l.v=s(l.v)):l.t="s",a[c]=l}}return n.s.c<1e7&&(a["!ref"]=i.default.utils.encode_range(n)),a}function c(){if(!(this instanceof c))return new c;this.SheetNames=[],this.Sheets={}}function u(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),n=0;n!=t.length;++n)a[n]=255&t.charCodeAt(n);return e}function d(t){var e=document.getElementById(t),a=o(e),n=a[1],r=a[0],s="SheetJS",d=new c,f=l(r);f["!merges"]=n,d.SheetNames.push(s),d.Sheets[s]=f;var h=i.default.write(d,{bookType:"xlsx",bookSST:!1,type:"binary"});saveAs(new Blob([u(h)],{type:"application/octet-stream"}),"test.xlsx")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.multiHeader,a=void 0===e?[]:e,n=t.header,o=t.data,s=t.filename,d=t.merges,f=void 0===d?[]:d,h=t.autoWidth,m=void 0===h||h,p=t.bookType,v=void 0===p?"xlsx":p;s=s||"excel-list",o=(0,r.default)(o),o.unshift(n);for(var b=a.length-1;b>-1;b--)o.unshift(a[b]);var y="SheetJS",g=new c,w=l(o);if(f.length>0&&(w["!merges"]||(w["!merges"]=[]),f.forEach(function(t){w["!merges"].push(i.default.utils.decode_range(t))})),m){for(var x=o.map(function(t){return t.map(function(t){return null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length}:{wch:t.toString().length}})}),C=x[0],Z=1;Z<x.length;Z++)for(var _=0;_<x[Z].length;_++)C[_]["wch"]<x[Z][_]["wch"]&&(C[_]["wch"]=x[Z][_]["wch"]);w["!cols"]=C}g.SheetNames.push(y),g.Sheets[y]=w;var S=i.default.write(g,{bookType:v,bookSST:!1,type:"binary"});saveAs(new Blob([u(S)],{type:"application/octet-stream"}),"".concat(s,".").concat(v))}a("0fd4")},"4e9d":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5df3"),a("20d6"),a("7514"),a("ac6a");var r=a("7be8"),i=n(a("edf6")),o=n(a("f77d")),s=a("5fd4"),l=a("c638"),c=a("a5e0");function u(t,e){var a={x:t[0][0],y:t[0][1]},n={x:t[1][0],y:t[1][1]},r={x:e[0][0],y:e[0][1]},i={x:e[1][0],y:e[1][1]};return a.y===r.y&&n.y===i.y&&(a.x>=r.x&&a.x<=i.x)}var d={components:{GridLayout:r.GridLayout,GridItem:r.GridItem,visualizePanel:i.default},props:{dashboard:{required:!1,type:Object,default:function(){return{}}},mode:{required:!1,type:String,default:"view"}},data:function(){return{charts:[],results:{},loading:!1,layout:[],myChartList:[],showChartList:!1,chartLoading:{}}},watch:{"dashboard.objectId":{immediate:!0,handler:function(t){t&&this.getList(t)}}},methods:{getList:function(){var t=this;this.charts=[],this.layout=[],this.loading=!0,(0,s.chartByDashboard)(this.dashboard.objectId).then(function(e){t.loading=!1,t.charts=e.data;var a=[],n=t.dashboard.content&&t.dashboard.content.layout||[];t.charts.forEach(function(e,r){t.$set(t.results,e.objectId,[]),t.$set(t.chartLoading,e.objectId,!1),e.content.allSelected=[],e.content.allSelected=e.content.allSelected.concat(e.content.selectedCalcul).concat(e.content.selectedDimension),e.content.filters&&(a=e.content.filters.map(c.buildFilterSentence));var i=(0,c.buildSqlSentence)({dataSrc:e.content.dataSrc,selectedCalcul:e.content.selectedCalcul,selectedDimension:e.content.selectedDimension,orderByStrs:e.content.orderByStrs,filterStr:a.join(" and "),limit:e.content.limit});t.exeSql(i,e,r),n.find(function(t){return t.id===e.objectId})||t.generatePosition(e,n,r)}),t.layout=n.filter(function(e){return t.charts.find(function(t){return t.objectId===e.id})}),t.handleLayoutChange()})},getChartItem:function(t){return this.charts.find(function(e){return e.objectId===t})},handleCaculPos:function(t){var e=[];return t.forEach(function(t){t.yOffSet=t.y+t.h,t.xOffSet=t.x+t.w,t.bottomLine=[[t.x,t.yOffSet],[t.xOffSet,t.yOffSet]],t.topLine=[[t.x,t.y],[t.xOffSet,t.y]]}),t.forEach(function(a){var n=t.every(function(t){return!u(a.bottomLine,t.topLine)});n&&e.push(a)}),e},generatePosition:function(t,e,a){var n;if(0===e.length)n={id:t.objectId,x:0,y:0,w:12,h:9,i:t.objectId};else{var r=this.handleCaculPos(e),i=r.reduce(function(t,e){return t.bottomLine[0][1]>e.bottomLine[0][1]&&(t=e),t},r[0]);n={id:t.objectId,x:i.x,y:i.yOffSet,w:i.w,h:9,i:t.objectId}}e.push(n)},handleShare:function(){var t=this.$createElement,e="https://islasher.com/vue-data-board#/fullscreendb/".concat(this.dashboard.objectId);this.$msgbox({title:"分享链接",message:t("p",null,[t("a",{style:"color: #205cd8",attrs:{href:e,target:"_blank"}},e)])})},handleLinkChart:function(){var t=this;(0,l.chartList)().then(function(e){t.myChartList=e.data,t.showChartList=!0})},linkChart:function(t){var e=this,a={chart_id:t.chart_id,dashboard_id:this.dashboard.objectId};(0,s.addChartToDB)(a).then(function(t){e.showChartList=!1,e.getList(),e.$message({type:"success",message:"添加成功！"})})},isExisted:function(t){return this.charts.findIndex(function(e){return e.objectId===t.chart_id})>=0},handleEdit:function(t){this.$router.push("/chartpanel/".concat(t.objectId))},handleDelete:function(t){var e=this;this.$confirm("该操作将从该 Dashboard 中删除该图表，并不会删除原图表，确认继续?","提示",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){var a=e.layout.findIndex(function(e){return e.id===t.objectId}),n=JSON.parse(JSON.stringify(e.layout));n.splice(a,1),e.dashboard.content.layout=n;var r={chart_id:t.objectId,dashboard_id:e.dashboard.objectId};Promise.all([(0,s.updateDashboard)(e.dashboard),(0,s.unMapChartDb)(r)]).then(function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})})})},handleLayoutChange:function(){this.dashboard.content=this.dashboard.content||{},this.dashboard.content.layout=this.layout,(0,s.updateDashboard)(this.dashboard).then(function(){console.log("layout saved")})},handleResize:function(t,e,a,n,r){this.$refs["chartInstance".concat(t)][0].$children[0].$emit("resized")},exeSql:function(t,e,a){var n=this;this.$set(this.chartLoading,e.objectId,!0),(0,o.default)(t).then(function(t){n.$set(n.chartLoading,e.objectId,!1),n.$set(n.results,e.objectId,t.data)})}}};e.default=d},"4ff9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"panel-header",staticStyle:{"margin-bottom":"20px"},attrs:{"body-style":"padding:0;"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"header"},slot:"header"},[a("span",[a("span",{staticClass:"back-button",on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"el-icon-back"}),a("span",[t._v("返回")])]),"create"!==this.$route.params.id?a("span",[t._v("编辑图表")]):a("span",[t._v("创建图表")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text"},on:{click:t.viewAllChart}},[t._v("\n          全部图表\n        ")])],1),a("span",[a("el-button",{staticStyle:{float:"right",margin:"0 10px 0 0"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:t.handleDownload}}),"create"!==this.$route.params.id?a("el-button",{staticStyle:{float:"right",margin:"0 10px 0 0"},attrs:{size:"mini",type:"primary"},on:{click:t.handleLinkDB}},[t._v("添加到仪表盘")]):t._e(),a("el-button",{staticStyle:{float:"right",margin:"0 10px 0 0"},attrs:{size:"mini",type:"primary",icon:"el-icon-save"},on:{click:t.handleSave}},[t._v("保存 ")]),"create"!==this.$route.params.id?a("el-button",{staticStyle:{float:"right",margin:"0 10px 0 0"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.$router.replace("/chartpanel/create")}}},[t._v("新建图表")]):t._e()],1)])]),a("div",{staticClass:"app-container",staticStyle:{display:"flex"}},[a("el-card",{staticStyle:{width:"300px","margin-right":"20px","text-align":"center"},attrs:{id:"dataPanel"}},[a("data-panel",{ref:"dataPanel",attrs:{"result-loading":t.loading,"data-src":t.dataSrc},on:{change:t.handleDataSrcChange}})],1),a("el-card",{staticStyle:{width:"100%"},attrs:{"body-style":"padding: 10px 20px;"}},[a("div",{staticClass:"form-wrapper"},[a("el-form",{staticClass:"analysis-form",attrs:{id:"formPanel",size:"mini"}},[a("el-form-item",{attrs:{id:"dimensionInput",label:"维度"}},[a("draggable",{staticClass:"draggable-wrapper",attrs:{group:{name:"col",pull:!0,put:!0}},on:{change:t.handleDimensionChange},model:{value:t.sharedState.dimensions,callback:function(e){t.$set(t.sharedState,"dimensions",e)},expression:"sharedState.dimensions"}},t._l(t.sharedState.dimensions,function(e){return a("el-tag",{key:e.Column,staticClass:"draggable-item",attrs:{size:"small",closable:""},on:{close:function(a){return t.handleCloseDimensionTag(e)}}},[t._v("\n                "+t._s(e.Column)+"\n              ")])}),1)],1),a("el-form-item",{attrs:{id:"fieldInput",label:"数值"}},[a("draggable",{staticClass:"draggable-wrapper",attrs:{group:{name:"col",pull:!0,put:!0}},on:{change:t.handleColChange},model:{value:t.sharedState.caculCols,callback:function(e){t.$set(t.sharedState,"caculCols",e)},expression:"sharedState.caculCols"}},t._l(t.sharedState.caculCols,function(e){return a("el-tag",{key:e.Column,staticClass:"selected-field",attrs:{size:"small",closable:""},on:{close:function(a){return t.handleCloseColTag(e)}}},[a("el-select",{staticClass:"draggable-item",staticStyle:{background:"rgba(0,0,0,0)"},attrs:{size:"mini",closable:""},model:{value:e.calculFunc,callback:function(a){t.$set(e,"calculFunc",a)},expression:"col.calculFunc"}},t._l(e.availableFunc,function(t,n){return a("el-option",{key:n,attrs:{label:e.Column+"("+t.name+")",value:t.func}})}),1)],1)}),1)],1),a("orderPanel",{model:{value:t.orderByStrs,callback:function(e){t.orderByStrs=e},expression:"orderByStrs"}}),a("filterPanel",{attrs:{filters:t.currentFilters,disabled:!t.allSelected||0===t.allSelected.length},on:{"update:filters":function(e){t.currentFilters=e},change:t.handleAddFilter}}),a("el-form-item",[a("div",{staticClass:"limit-input"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.editLimit,expression:"!editLimit"}]},[t._v("\n                查询前"+t._s(t.limit)+"条数据\n                "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.editLimit=!0}}},[t._v("修改")])],1),a("span",{directives:[{name:"show",rawName:"v-show",value:t.editLimit,expression:"editLimit"}]},[a("el-input-number",{staticStyle:{width:"100px"},attrs:{disabled:t.loading,size:"mini",placeholder:"数据条数"},on:{blur:function(e){t.editLimit=!1}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}}),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editLimit=!1}}},[t._v("确认")])],1)])])],1),a("el-form",{staticClass:"chart-form",attrs:{size:"mini","label-position":"top"}},[a("el-form-item",{attrs:{label:"图表名称:"}},[a("el-input",{attrs:{size:"mini",placeholder:"未命名"},model:{value:t.chartName,callback:function(e){t.chartName=e},expression:"chartName"}})],1),a("el-form-item",{attrs:{label:"图表描述:"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入图表描述"},model:{value:t.chartDesc,callback:function(e){t.chartDesc=e},expression:"chartDesc"}})],1)],1)],1),a("visualize-panel",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"vizPanel",data:t.result,"chart-type":t.chartType,schema:t.allSelected},on:{"update:chartType":function(e){t.chartType=e},"update:chart-type":function(e){t.chartType=e}}})],1)],1),a("el-dialog",{attrs:{title:"我的图表",visible:t.showMyCharts},on:{"update:visible":function(e){t.showMyCharts=e}}},[a("el-table",{attrs:{data:t.myChartList}},[a("el-table-column",{attrs:{label:"名称",width:"200",prop:"chart_name"}}),a("el-table-column",{attrs:{label:"描述",prop:"desc"}}),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.switchChart(e.row)}}},[t._v("\n            编辑\n          ")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.deleteChart(e.row)}}},[t._v("\n            删除\n          ")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.showMyCharts=!1}}},[t._v("关 闭")])],1)],1),a("el-dialog",{attrs:{title:"Dashboard 列表",visible:t.showDashboards},on:{"update:visible":function(e){t.showDashboards=e}}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-select",{attrs:{size:"small"},model:{value:t.selectedDb,callback:function(e){t.selectedDb=e},expression:"selectedDb"}},t._l(t.dashboardList,function(e){return a("el-option",{key:e.objectId,attrs:{label:e.name,disabled:t.isDbDisbaled(e),value:e.objectId}})}),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.showDashboards=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.linkDb}},[t._v("确定")])],1)]),a("el-dropdown",{staticClass:"help-center-wrapper",attrs:{placement:"top",size:"mini"},on:{command:t.handleHelp}},[a("div",{staticClass:"help-center"},[a("i",{staticClass:"el-icon-question"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown",size:"mini"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"guide"}},[t._v("\n        开启新手引导\n      ")])],1)],1)],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"51ff":function(t,e,a){var n={"./chart_bar.svg":"5320","./chart_bar_disabled.svg":"df2e","./chart_line.svg":"a74a","./chart_line_disabled.svg":"78fa","./chart_pie.svg":"835b","./chart_pie_disabled.svg":"d346","./chart_table.svg":"caed","./horizontal_bar.svg":"3839","./horizontal_bar_disabled.svg":"7e4b","./stack_bar.svg":"7bc6","./stack_bar_disabled.svg":"890a"};function r(t){var e=i(t);return a(e)}function i(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id="51ff"},5320:function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-chart_bar",use:"icon-chart_bar-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-chart_bar"><defs><style type="text/css"></style></defs><path d="M142.222 526.222h142.222v312.89H142.222z" fill="#29C287" p-id="1951" /><path d="M341.333 184.889h142.223V839.11H341.333z" fill="#706EE7" p-id="1952" /><path d="M540.444 412.444h142.223v426.667H540.444z" fill="#29C287" p-id="1953" /><path d="M739.556 611.556h142.222V839.11H739.556z" fill="#706EE7" p-id="1954" /></symbol>'});o.a.add(s);e["default"]=s},"53ec":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tempMockData=e.tableSchema=e.tables=e.bases=e.sources=void 0;var n=[{id:2,name:"mysql"}];e.sources=n;var r=[{id:9,name:"datadrug"}];e.bases=r;var i=[{id:2496,name:"order_analysis"}];e.tables=i;var o=[{Type:"varchar(19)",Column:"date"},{Type:"varchar(9)",Column:"user_src"},{Type:"varchar(11)",Column:"order_src"},{Type:"varchar(2)",Column:"order_location"},{Type:"int(5)",Column:"new_order"},{Type:"int(5)",Column:"payed_order"},{Type:"int(4)",Column:"pending_order"},{Type:"int(4)",Column:"cancel_order"},{Type:"int(4)",Column:"reject_order"},{Type:"int(4)",Column:"good_order"},{Type:"int(4)",Column:"report_order"}];e.tableSchema=o;var s={schema:{primaryKey:["index"],pandas_version:"0.20.0",fields:[{type:"integer",name:"index"},{type:"string",name:"total_amount"},{type:"string",name:"month_date_time"}]},data:[{index:0,total_amount:"397223.12",month_date_time:"2008-12"},{index:1,total_amount:"444678.56",month_date_time:"2008-09"},{index:2,total_amount:"382070.24",month_date_time:"2008-02"},{index:3,total_amount:"486527.22",month_date_time:"2008-08"},{index:4,total_amount:"406257.49",month_date_time:"2008-11"},{index:5,total_amount:"540227.86",month_date_time:"2008-04"},{index:6,total_amount:"388797.98",month_date_time:"2007-11"},{index:7,total_amount:"523384.42",month_date_time:"2008-03"},{index:8,total_amount:"487726.83",month_date_time:"2008-07"},{index:9,total_amount:"412314.96",month_date_time:"2008-10"},{index:10,total_amount:"515657.99",month_date_time:"2008-06"},{index:11,total_amount:"435124.44",month_date_time:"2007-12"},{index:12,total_amount:"181152.41",month_date_time:"2007-10"},{index:13,total_amount:"10023.33",month_date_time:"2007-07"},{index:14,total_amount:"124292.90",month_date_time:"2007-08"},{index:15,total_amount:"479521.70",month_date_time:"2008-01"},{index:16,total_amount:"149727.25",month_date_time:"2007-09"},{index:17,total_amount:"539288.53",month_date_time:"2008-05"}]};e.tempMockData=s},"56d7":function(t,e,a){"use strict";var n=a("4ea4");a("cadf"),a("551c"),a("f751"),a("097d");var r=n(a("2b0e")),i=n(a("8c4f")),o=n(a("3dfd")),s=n(a("5c96"));a("0fae");var l=n(a("a18c")),c=n(a("4360"));a("985d"),r.default.config.productionTip=!1,r.default.use(i.default),r.default.use(s.default),new r.default({router:l.default,store:c.default,el:"#app",render:function(t){return t(o.default)}})},5757:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{staticClass:"panel",staticStyle:{"text-align":"left"},attrs:{"label-position":"top"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.dataSrcVisible,expression:"dataSrcVisible"}],attrs:{label:"数据源:"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",filterable:"",placeholder:"选择数据源",clearable:""},on:{change:t.handleDataSrcChange},model:{value:t.selectedTable,callback:function(e){t.selectedTable=e},expression:"selectedTable"}},t._l(t.dataSourceList,function(t){return a("el-option",{key:t.tableId,attrs:{label:t.name,value:t.name}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.dataSrcVisible,expression:"!dataSrcVisible"}],attrs:{label:"当前表："}},[a("span",{staticStyle:{"font-size":"12px","margin-right":"5px"}},[t._v(t._s(t.selectedTable))]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.editDataSrc}},[t._v("\n        修改\n      ")])],1),a("el-form-item",{attrs:{label:"字段："}},[a("draggable",{directives:[{name:"loading",rawName:"v-loading",value:t.schemaLoading,expression:"schemaLoading"}],attrs:{group:{name:"col",pull:"clone",put:!1},move:t.handleMove},model:{value:t.tableSchema,callback:function(e){t.tableSchema=e},expression:"tableSchema"}},t._l(t.tableSchema,function(e){return a("div",{key:e.Column,staticClass:"drag-list-item"},[a("i",{staticClass:"el-icon-rank",staticStyle:{"font-size":"12px",color:"#409EFF"}}),t._v("\n          "+t._s(e.Column)+"\n        ")])}),0)],1)],1)],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5d0f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-wrapper"},[a("div",{staticClass:"tool-bar"},[a("div",[a("span",{staticClass:"db-name"},[t._v(t._s(t.dashboard.name))]),a("span",[t._v(t._s(t.dashboard.desc))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"edit"===t.mode,expression:"mode === 'edit'"}]},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleShare}},[t._v("\n        分享\n      ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleLinkChart}},[t._v("\n        添加图表\n      ")])],1)]),0!==t.charts.length?a("grid-layout",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-height":"500px"},attrs:{layout:t.layout||[],"col-num":24,"row-height":30,"is-draggable":"edit"===t.mode,"is-resizable":"edit"===t.mode,"is-mirrored":!1,"vertical-compact":!0,"pane-container":!1,margin:[10,10],"use-css-transforms":!0},on:{"layout-updated":t.handleLayoutChange}},t._l(t.layout||[],function(e){return a("grid-item",{key:e.index,attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},on:{resized:t.handleResize}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.chartLoading[e.i],expression:"chartLoading[item.i]"}],staticClass:"visualize-card",attrs:{"body-style":"padding: 10px;"}},[a("div",{staticClass:"operation-bar",attrs:{slot:"header"},slot:"header"},[a("div",[a("span",[t._v(t._s(t.getChartItem(e.i).chart_name))])]),a("div",[a("i",{directives:[{name:"show",rawName:"v-show",value:"edit"===t.mode,expression:"mode === 'edit'"}],staticClass:"el-icon-edit",on:{click:function(a){t.handleEdit(t.getChartItem(e.i))}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:"edit"===t.mode,expression:"mode === 'edit'"}],staticClass:"el-icon-delete",on:{click:function(a){t.handleDelete(t.getChartItem(e.i))}}}),a("el-tooltip",{staticClass:"item",attrs:{content:t.getChartItem(e.i).desc,effect:"dark",placement:"top-end"}},[a("i",{staticClass:"el-icon-info",staticStyle:{color:"#409eff",cursor:"pointer"}})])],1)]),a("visualize-panel",{key:e.index,ref:"chartInstance"+e.i,refInFor:!0,attrs:{data:t.results[e.i],schema:t.getChartItem(e.i).content.allSelected,"chart-type":t.getChartItem(e.i).content.chartType,"is-edit-mode":!1,"chart-style":{height:30*e.h+10*(e.h-1)-60+"px"}},on:{"update:chartType":function(a){t.$set(t.getChartItem(e.i).content,"chartType",a)},"update:chart-type":function(a){t.$set(t.getChartItem(e.i).content,"chartType",a)}}})],1)],1)}),1):t._e(),0===t.charts.length&&"edit"===t.mode?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"welcome-container"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleLinkChart}},[t._v("\n      添加图表\n    ")]),a("div",[a("el-link",{attrs:{type:"info",underline:!1}},[a("router-link",{attrs:{to:"/chartpanel/create"}},[t._v("\n          Dashboard Is Empty，Go Create Your First Chart!\n        ")])],1)],1)],1):t._e(),a("el-dialog",{attrs:{title:"我的图表",visible:t.showChartList},on:{"update:visible":function(e){t.showChartList=e}}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$router.push("/chartpanel/create")}}},[t._v("\n      Create New Chart\n    ")]),a("el-table",{attrs:{data:t.myChartList}},[a("el-table-column",{attrs:{label:"名称",width:"200",prop:"chart_name"}}),a("el-table-column",{attrs:{label:"描述",prop:"desc"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isExisted(e.row)},on:{click:function(a){return t.linkChart(e.row)}}},[t._v("\n            添加\n          ")]),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return t.$router.push("/chartpanel/"+e.row.chart_id)}}},[t._v("\n            编辑\n          ")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.showChartList=!1}}},[t._v("关 闭")])],1)],1)],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"5e27":function(t,e,a){},"5f87":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.getToken=o,e.setToken=s,e.removeToken=l;var r=n(a("a78e")),i="DS-Token";function o(){return r.default.get(i)}function s(t){return r.default.set(i,t)}function l(){return r.default.remove(i)}},"5fd4":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.addDashboard=i,e.updateDashboard=o,e.getdDashboardById=s,e.deleteDashboard=l,e.dashboardList=c,e.addChartToDB=u,e.chartByDashboard=d,e.dbByChart=f,e.unMapChartDb=h,e.dbOrder=m;var r=n(a("1c1e"));function i(t){return(0,r.default)({url:"/dashboard",method:"POST",data:t})}function o(t){return(0,r.default)({url:"/dashboard",method:"PUT",data:t})}function s(t){return(0,r.default)({url:"/dashboard?id=".concat(t)})}function l(t){return(0,r.default)({url:"/dashboard",method:"DELETE",data:t})}function c(){return(0,r.default)({url:"/dashboard/list"})}function u(t){return(0,r.default)({url:"/chartdashmap",method:"POST",data:t})}function d(t){return(0,r.default)({url:"/chartdashmap/chartbydashboard?id=".concat(t)})}function f(t){return(0,r.default)({url:"/chartdashmap/dbbychart?id=".concat(t)})}function h(t){return(0,r.default)({url:"/chartdashmap/unmap",method:"POST",data:t})}function m(t){return(0,r.default)({url:"/dashboard/order",method:"POST",data:t})}},"661c":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("8615"),a("7f7f"),a("ac6a");var r=n(a("313e"));a("817d");var i={props:{widgetMeta:{required:!1,type:Object,default:function(){}},data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},validateData:function(t){Array.isArray(t)||this.$message({message:"线图的数据格式必须为数组，请检查你的数据格式"})},renderChart:function(t){var e=this;if(this.$refs.chart){var a=[],n=[],i={};this.schema.forEach(function(e,r){a.push(e.label||e.name),e.asxAxis||(i[e.name]={name:e.label||e.name,data:[],type:"line"}),t.forEach(function(t){e.asxAxis?n.push(t[e.name]):i[e.name].data.push(t[e.name])})});var o={legend:{bottom:0,type:"scroll",data:a},toolbox:{show:!0,itemSize:12,top:0,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"80px",right:"0",bottom:"45px"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"category",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},data:n},yAxis:{axisLabel:{show:!0,color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(i)};setTimeout(function(){e.chart||(e.chart=r.default.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(o),e.chartOpt&&e.chart.setOption(e.chartOpt)},0)}}}};e.default=i},"6ceb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"6d46":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"筛选"}},[t._l(t.currentFilters,function(e,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(e){return t.handleClosefilter(n)},click:function(a){return t.handleEditFilter(e)}}},[t._v("\n    "+t._s(t.generateFilterSentence(e))+"\n  ")])}),a("el-button",{staticStyle:{width:"120px"},attrs:{disabled:t.disabled,type:"primary",size:"mini"},on:{click:function(e){t.visible=!0}}},[t._v("\n    添加筛选条件\n  ")]),a("el-dialog",{attrs:{visible:t.visible,title:"添加筛选项"}},[a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{staticClass:"el-form-item",attrs:{label:"请选择筛选字段"}},[a("el-select",{attrs:{size:"mini",placeholder:"选择筛选字段"},model:{value:t.filteCol,callback:function(e){t.filteCol=e},expression:"filteCol"}},t._l(t.sharedState.allCols,function(t){return a("el-option",{key:t.Column,attrs:{label:t.Column,value:t.Column}})}),1)],1),a("el-form-item",{staticClass:"el-form-item",attrs:{label:"请选择筛选方式"}},[a("el-select",{attrs:{size:"mini",placeholder:"选择筛选方式"},model:{value:t.filterOperator,callback:function(e){t.filterOperator=e},expression:"filterOperator"}},t._l(t.filterOperatorOpts,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.operator}})}),1)],1),-1===t.currentOperatorParamNum?a("el-form-item",{staticClass:"el-form-item",attrs:{label:"请输入判断条件值"}},[t._l(t.arrValue,function(e,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:t.handleRemove}},[t._v("\n          "+t._s(e)+"\n        ")])}),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",type:"text"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}}),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleAdd}},[t._v("\n          Add\n        ")])],2):a("el-form-item",{staticClass:"el-form-item",attrs:{label:"请输入判断条件值"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",type:"text"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:2===t.currentOperatorParamNum,expression:"currentOperatorParamNum===2"}]},[t._v("~")]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:2===t.currentOperatorParamNum,expression:"currentOperatorParamNum===2"}],staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.visible=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleConfirm}},[t._v("Confirm")])],1)],1)],2)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"6e28":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("8615"),a("ac6a"),a("4f7f"),a("5df3"),a("1c4c"),a("7514"),a("7f7f");var r=n(a("313e"));a("817d");var i={props:{data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},validateData:function(t){Array.isArray(t)||this.$message({message:"柱状图的数据格式必须为数组，请检查你的数据格式"})},renderChart:function(t){var e=this;if(this.$refs.chart){var a=[],n=[],i={};if(2===this.schema.filter(function(t){return t.asxAxis}).length){var o=this.schema.filter(function(t){return t.asxAxis}),s=o[0].name,l=o[1].name,c=this.schema.find(function(t){return!t.asxAxis}).name;n=this.data.map(function(t){return a.push(t[l]),t[s]}),n=Array.from(new Set(n)),a=Array.from(new Set(a)),a=a.map(function(e,a){var r=n.map(function(a){var n=t.find(function(t){return t[l]===e&&t[s]===a});return n?n[c]:"-"});return e+="",i[e]={name:e,data:r,type:"bar"},e})}else this.schema.forEach(function(e,r){a.push(e.label||e.name),e.asxAxis||(i[e.name]={name:e.label||e.name,data:[],type:"bar"}),t.forEach(function(t){e.asxAxis?n.push(t[e.name]):i[e.name].data.push(t[e.name])})});var u={legend:{bottom:0,type:"scroll",data:a},toolbox:{show:!0,top:0,itemSize:12,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"80px",right:"0",bottom:"45px"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},splitArea:{show:!0,interval:0},data:n},yAxis:{axisLabel:{show:!0,color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(i)};setTimeout(function(){e.chart||(e.chart=r.default.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(u),e.chartOpt&&e.chart.setOption(e.chartOpt)},0)}}}};e.default=i},"6f09":function(t,e,a){"use strict";a.r(e);var n=a("4e9d"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},7087:function(t,e,a){"use strict";a.r(e);var n=a("046c"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},7132:function(t,e,a){"use strict";var n=a("315c"),r=a.n(n);r.a},"72a3":function(t,e,a){"use strict";a.r(e);var n=a("4140"),r=a("b65c");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"74d5":function(t,e,a){},"78fa":function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-chart_line_disabled",use:"icon-chart_line_disabled-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-chart_line_disabled"><defs><style type="text/css"></style></defs><path d="M497.778 790.756L304.356 651.378l-133.69 108.089-54.044-68.267 182.045-147.911 204.8 145.067 358.4-213.334 45.51 73.956z" fill="#909399" p-id="1822" /><path d="M497.778 534.756L304.356 395.378l-133.69 108.089-54.044-68.267 182.045-147.911 204.8 145.067 358.4-213.334 45.51 73.956z" fill="#909399" p-id="1823" /></symbol>'});o.a.add(s);e["default"]=s},7932:function(t,e,a){"use strict";a.r(e);var n=a("48b4"),r=a("9a41");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"7ac4":function(t,e,a){},"7bc6":function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-stack_bar",use:"icon-stack_bar-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-stack_bar"><defs><style type="text/css"></style></defs><path d="M129.292929 527.601778h147.105616v323.635717H129.292929z" fill="#29C287" p-id="1942" /><path d="M335.614707 129.750626h147.106909v676.692041H335.614707z" fill="#706EE7" p-id="1943" /><path d="M541.191758 409.914182h147.105616v441.323313H541.191758z" fill="#29C287" p-id="1944" /><path d="M129.292929 291.338343h147.104324v235.373899H129.292929z" fill="#706EE7" p-id="1945" /><path d="M335.616 409.424162h147.105616V850.747475H335.616z" fill="#29C287" p-id="1946" /><path d="M540.902141 341.359192H688.006465v235.373899H540.902141z" fill="#706EE7" p-id="1947" /><path d="M745.015596 411.177374H892.121212v441.323313H745.015596z" fill="#29C287" p-id="1948" /><path d="M745.015596 331.015758h147.104323v235.373899H745.015596z" fill="#706EE7" p-id="1949" /></symbol>'});o.a.add(s);e["default"]=s},"7e4b":function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-horizontal_bar_disabled",use:"icon-horizontal_bar_disabled-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-horizontal_bar_disabled"><defs><style type="text/css"></style></defs><path d="M496.398222 129.292929l0 147.105616-323.635717 0L172.762505 129.292929z" fill="#909399" p-id="1978" /><path d="M894.249374 335.614707l0 147.106909-676.692041 1e-8L217.557333 335.614707z" fill="#909399" p-id="1979" /><path d="M614.085818 541.191758l0 147.105616-441.323313 0L172.762505 541.191758z" fill="#909399" p-id="1980" /><path d="M732.661657 129.292929l0 147.104324-235.37389899 0L497.287758 129.292929z" fill="#909399" p-id="1981" /><path d="M614.575838 335.616l0 147.10561601L173.252525 482.721616 173.252525 335.616z" fill="#909399" p-id="1982" /><path d="M682.640808 540.902141L682.640808 688.006465l-235.373899 0L447.266909 540.902141z" fill="#909399" p-id="1983" /><path d="M612.822626 745.015596L612.822626 892.121212l-441.323313 0L171.499313 745.015596z" fill="#909399" p-id="1984" /><path d="M692.984242 745.015596l1e-8 147.104323-235.37389901 0L457.610343 745.01559599z" fill="#909399" p-id="1985" /></symbol>'});o.a.add(s);e["default"]=s},"7ff0":function(t,e,a){"use strict";var n=a("82ed"),r=a.n(n);r.a},"82ac":function(t,e,a){},"82ed":function(t,e,a){},"835b":function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-chart_pie",use:"icon-chart_pie-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-chart_pie"><defs><style type="text/css"></style></defs><path d="M483.556 540.444V145.067C292.978 159.289 142.222 318.577 142.222 512c0 204.8 164.978 369.778 369.778 369.778 193.422 0 352.711-150.756 366.933-341.334H483.556z" fill="#706EE7" p-id="2082" /><path d="M540.444 116.622v366.934h366.934C896 287.289 736.71 128 540.444 116.622z" fill="#29C287" p-id="2083" /></symbol>'});o.a.add(s);e["default"]=s},8628:function(t,e,a){"use strict";a.r(e);var n=a("87e0"),r=a("7087");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"87e0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"890a":function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-stack_bar_disabled",use:"icon-stack_bar_disabled-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-stack_bar_disabled"><defs><style type="text/css"></style></defs><path d="M129.292929 527.601778h147.105616v323.635717H129.292929z" fill="#909399" p-id="1942" /><path d="M335.614707 129.750626h147.106909v676.692041H335.614707z" fill="#909399" p-id="1943" /><path d="M541.191758 409.914182h147.105616v441.323313H541.191758z" fill="#909399" p-id="1944" /><path d="M129.292929 291.338343h147.104324v235.373899H129.292929z" fill="#909399" p-id="1945" /><path d="M335.616 409.424162h147.105616V850.747475H335.616z" fill="#909399" p-id="1946" /><path d="M540.902141 341.359192H688.006465v235.373899H540.902141z" fill="#909399" p-id="1947" /><path d="M745.015596 411.177374H892.121212v441.323313H745.015596z" fill="#909399" p-id="1948" /><path d="M745.015596 331.015758h147.104323v235.373899H745.015596z" fill="#909399" p-id="1949" /></symbol>'});o.a.add(s);e["default"]=s},"8a71":function(t,e,a){"use strict";a.r(e);var n=a("26a5"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"8c5f":function(t,e,a){"use strict";a.r(e);var n=a("daaf"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"8f49":function(t,e,a){"use strict";var n=a("74d5"),r=a.n(n);r.a},"91d2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chart",style:t.chartStyle})},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"924c":function(t,e,a){"use strict";a.r(e);var n=a("4ff9"),r=a("fec3");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("2a60");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"12c45e99",null);e["default"]=s.exports},"94d5":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={token:function(t){return t.user.token},avatar:function(t){return t.user.avatar}},r=n;e.default=r},9703:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("img",{attrs:{src:a("cf05")}}),n("h1",[t._v("404")]),n("h2",[t._v("Page Not Found")]),n("br"),n("el-button",{attrs:{type:"success",size:"large"},on:{click:function(e){return t.$router.push("/chartpanel/create")}}},[t._v("\n    Go To Create.\n  ")])],1)},r=[],i=(a("9f6e"),a("2877")),o={},s=Object(i["a"])(o,n,r,!1,null,"9a107128",null);e["default"]=s.exports},"985d":function(t,e,a){"use strict";var n=a("4ea4");a("ac6a");var r=n(a("2b0e")),i=n(a("c00a"));r.default.component("svg-icon",i.default);var o=function(t){return t.keys().map(t)},s=a("51ff");o(s)},"998c":function(t,e,a){"use strict";a.r(e);var n=a("c63d"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"9a41":function(t,e,a){"use strict";a.r(e);var n=a("6e28"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},"9d5d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("img",{attrs:{src:a("cf05")}}),n("el-form",{staticClass:"form-wrapper"},[n("el-form-item",[n("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}})],1),n("el-form-item",[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleLogin}},[t._v("\n      登录\n    ")]),n("el-divider"),n("div",{staticStyle:{display:"flex"}},[n("el-button",{staticStyle:{"text-align":"left"},attrs:{type:"text",size:"mini"},on:{click:t.useTestAccount}},[t._v("\n        不想注册？点我使用测试账号\n      ")]),n("el-button",{staticStyle:{"text-align":"right"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.$router.push("/signup")}}},[t._v("\n        没有账号？去注册"),n("i",{staticClass:"el-icon-right"})])],1)],1)],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"9ed6":function(t,e,a){"use strict";a.r(e);var n=a("9d5d"),r=a("998c");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("0652");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"44caa2db",null);e["default"]=s.exports},"9f6e":function(t,e,a){"use strict";var n=a("c980"),r=a.n(n);r.a},a18c:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.menuRoutes=void 0,a("6762");var r=n(a("e54b")),i=n(a("8c4f")),o=a("5f87"),s=[{path:"/login",component:function(){return Promise.resolve().then(function(){return(0,r.default)(a("9ed6"))})}},{path:"/signup",component:function(){return Promise.resolve().then(function(){return(0,r.default)(a("3222"))})}},{path:"/",component:function(){return Promise.resolve().then(function(){return(0,r.default)(a("1e4b"))})}},{path:"/dashboard",component:function(){return Promise.resolve().then(function(){return(0,r.default)(a("c937"))})}},{path:"/chartpanel/:id",component:function(){return Promise.resolve().then(function(){return(0,r.default)(a("924c"))})},meta:{activeMenu:"/chartpanel/create"}},{path:"/fullscreendb/:id",component:function(){return Promise.resolve().then(function(){return(0,r.default)(a("c223"))})}},{path:"*",component:function(){return Promise.resolve().then(function(){return(0,r.default)(a("9703"))})}}],l=s;e.menuRoutes=l;var c=new i.default({routes:s}),u=["/login","/auth-redirect","/signup"];c.beforeEach(function(t,e,a){(0,o.getToken)()?("/login"===t.path&&a({path:"/"}),a()):u.includes(t.path)?a():a("/login?redirect=".concat(t.path))});var d=c;e.default=d},a3ce:function(t,e,a){"use strict";a.r(e);var n=a("fec5"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},a5e0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.trimColType=r,e.buildSqlSentence=i,e.buildFilterSentence=o,a("28a5"),a("7f7f"),a("7514");var n=a("aa35");function r(t){var e;return e=t.indexOf("(")>=0?n.dataType.find(function(e){return e.name===t.split("(")[0]}):n.dataType.find(function(e){return e.name===t}),e}function i(t){var e,a,n,i=t.dataSrc,o=t.selectedCalcul,s=t.selectedDimension,l=t.orderByStrs,c=t.filterStr,u=t.limit,d=[],f=[],h=[];if(h=h.concat(o).concat(s),d=h.map(function(t){var e=o.find(function(e){return e.Column===t.Column});return e&&"none"!==e.calculFunc?"".concat(e.calculFunc||r(e.Type).availableFunc[0],"(").concat(e.Column,") as ").concat(e.Column):(f.push(t.Column),t.Column)}),0!==d.length&&i)return f.length>0&&(e="GROUP BY ".concat(f.join())),l.length>0&&(a="ORDER BY ".concat(l.join())),c&&(n="where ".concat(c)),"SELECT ".concat(d.join()," FROM ").concat(i," ").concat(n||""," ").concat(e||""," ").concat(a||""," LIMIT ").concat(u||200)}function o(t){var e,a;return r(t.colType).needQuotation&&(a=n(t.value)),e=1===t.operatorParamNum?"".concat(t.filteCol," ").concat(t.filterOperator," ").concat(a.value1):2===t.operatorParamNum?"".concat(t.filteCol," ").concat(t.filterOperator," ").concat(a.value1," and ").concat(a.value2):"".concat(t.filteCol," ").concat(t.filterOperator," ('").concat(a.arrValue.join(","),"')"),e;function n(t){return{value1:"'".concat(t.value1,"'"),value2:"'".concat(t.value2,"'"),arrValue:t.arrValue.map(function(t){return"'".concat(t,"'")})}}}},a74a:function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-chart_line",use:"icon-chart_line-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-chart_line"><defs><style type="text/css"></style></defs><path d="M497.778 790.756L304.356 651.378l-133.69 108.089-54.044-68.267 182.045-147.911 204.8 145.067 358.4-213.334 45.51 73.956z" fill="#29B983" p-id="1822" /><path d="M497.778 534.756L304.356 395.378l-133.69 108.089-54.044-68.267 182.045-147.911 204.8 145.067 358.4-213.334 45.51 73.956z" fill="#706EE7" p-id="1823" /></symbol>'});o.a.add(s);e["default"]=s},a827:function(t,e,a){"use strict";var n=a("7ac4"),r=a.n(n);r.a},aa35:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataType=e.filterOperator=e.sqlFunc=void 0;var n={sum:"合计",avg:"平均",max:"最大值",min:"最小值",count:"计数",none:"无"};e.sqlFunc=n;var r=[{operator:"=",name:"等于",paramNum:1},{operator:">",name:"大于",paramNum:1},{operator:"<",name:"小于",paramNum:1},{operator:">=",name:"大于等于",paramNum:1},{operator:"<=",name:"小于等于",paramNum:1},{operator:"!=",name:"不等于",paramNum:1},{operator:"BETWEEN",name:"区间",paramNum:2},{operator:"in",name:"In",paramNum:-1},{operator:"like",name:" 匹配",paramNum:1}];e.filterOperator=r;var i=[{name:"tinyint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"smallint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"mediumint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"int",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"bigint",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"float",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"double",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"real",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"decimal",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]},{name:"timestamp",needQuotation:!1,availableFunc:["count","none"]},{name:"date",needQuotation:!0,availableFunc:["count","none"]},{name:"time",needQuotation:!0,availableFunc:["count","none"]},{name:"datetime",needQuotation:!0,availableFunc:["count","none"]},{name:"year",needQuotation:!0,availableFunc:["count","none"]},{name:"char",needQuotation:!0,availableFunc:["count","none"]},{name:"varchar",needQuotation:!0,availableFunc:["count","none"]},{name:"tinytext",needQuotation:!0,availableFunc:["count","none"]},{name:"text",needQuotation:!0,availableFunc:["count","none"]},{name:"mediumtext",needQuotation:!0,availableFunc:["count","none"]},{name:"longtext",needQuotation:!0,availableFunc:["count","none"]},{name:"integer",needQuotation:!1,availableFunc:["sum","avg","max","min","count","none"]}];e.dataType=i},abbf:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("7514");var r=a("53ec"),i=n(a("310e")),o=n(a("f77d")),s=n(a("f0ee")),l={components:{draggable:i.default},props:{resultLoading:{default:!1},dataSrc:{requred:!0}},data:function(){return{schemaLoading:!1,dataSourceList:[],selectedTable:void 0,tableSchema:void 0,dataSrcVisible:"create"===this.$route.params.id,existWarning:null}},computed:{allSelected:function(){return s.default.state.dimensions.concat(s.default.state.caculCols)}},created:function(){this.dataSourceList=r.tables},methods:{initWithDataSrc:function(t){t?(this.selectedTable=t,this.fetchSchema()):(this.selectedTable=t,this.tableSchema=[],this.dataSrcVisible=!0)},editDataSrc:function(){this.dataSrcVisible=!0,this.selectedTable=void 0},handleDataSrcChange:function(){this.dataSrcVisible=!1,this.fetchSchema(),s.default.setAllColsAction([]),this.$emit("change",this.selectedTable)},fetchSchema:function(){var t=this;this.selectedTable?(this.schemaLoading=!0,(0,o.default)("desc ".concat(this.selectedTable)).then(function(e){t.schemaLoading=!1,t.tableSchema=e.data.map(function(t,e){return{Column:t.Field,Type:t.Type,id:e}}),s.default.setAllColsAction(t.tableSchema)})):this.tableSchema=[]},handleCloseDialog:function(t){this.selectedTable?t():(this.$message({type:"warning",message:"You Need Select Data Source First."}),t())},handleMove:function(t,e){var a=this;if(this.allSelected.find(function(e){return e.Column===t.draggedContext.element.Column}))return this.existWarning||(this.existWarning=this.$message({type:"warning",message:"Field Already Existed",onClose:function(t){a.existWarning=null}})),!1}}};e.default=l},ac0d:function(t,e,a){},ad96:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pane-container"},[a(t.currentType.componentName,{tag:"component",staticClass:"visualize-window",attrs:{data:t.chartData,schema:t.schema,"chart-style":t.chartStyle}}),t.isEditMode?a("div",{staticClass:"chart-style-panel"},[a("el-form",{attrs:{"label-position":"top",size:"mini"}},[a("el-form-item",{attrs:{label:"图表类型:"}},[a("div",{staticClass:"chart-type-list"},t._l(t.chartTypeList,function(e){return a("span",{key:e.type,class:{activedIcon:e.type===t.chartType,disabledIcon:!t.isUsable(e)},on:{click:function(a){return t.switchChartType(e)}}},[a("el-tooltip",{attrs:{content:e.matchRule.desc,placement:"top"}},[a("svg-icon",{staticClass:"icon",attrs:{"icon-class":t.isUsable(e)?e.icon:e.icon+"_disabled"}})],1)],1)}),0)])],1)],1):t._e()],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},b23d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAABwlBMVEUAAAAAAP8AVf9AgL8zZswkbdscceMaZuYuXegratUnYtgiZt0gYN8eaeErY+Moa9cmZtkkYdsjaNwhZN4gat8nYuImaNkkZNsjatwiZt0hY94oaN8madokZtsjY9wiZ90oZd0nad4mZt8lZOAkZ9skZdsjaNwoZt0nZN4mZ94lZd8kZtsjZNwnZ90mZd0lZt8kZN8jZdwmZt0mZN4lZ94kZd8kaNsjZtwnZNwmZd0lZ94jZ9wmZdwmZ90lZd0kZd4kZ9smZdwkZ94kZd4mZ9wmZtwlZ90kZd0mZt4lZtwkZd0lZd0kZt0mZt4lZd4kZ90mZd0lZt4lZtwmZt0kZtwkZ90mZt0lZ90lZt4lZt0lZd0lZt4kZ9wkZtwlZt0lZd0lZt0kZt4mZt0lZd0lZt0lZt0mZd4lZtwlZd0kZt0lZd0kZ90lZ90lZt0mZt0lZt4lZd0lZt0lZt0kZt0lZt0lZtwlZt0kZt0lZt0lZt4lZt0lZt0lZt0lZt0lZt0mZt0lZt0lZt0lZt0lZt0lZt4lZt0mZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt0lZt3///9dKWk5AAAAlHRSTlMAAQMEBQcJCgsMDQ8QERITFBUWFxgaGxwdHh8gIiMkJSYnKCkqKywtLi8wMjM0NTc4Ojw9Pj9AQUJERUhJSkxOT1FUVldfYWJkZ2pvcXN0d3l7fYCFho6QkZaXmZqbpaanqKqrrK2wsbW2ur3Cw8XGyc/Q0tXW19nb3d7f4+Tm5+jp6uvs7e7v8fP09ff4+fr7/P3+hEcqiwAAAAFiS0dElQhgeoMAAAMISURBVFjD7dhnVxNBFAbga0JEBVFRpKnBoGJXioAdsWNBBcVK1NgVGyIYkGAsQIKU5P3BftjJ1pnd7CR7PJyz92t2n/NmsnvnToj88suvZVybkyNDsVtd9R7QNVBq/NHZNR7RANKDJwIe0QASfWVe0UCiJ+gVDQx3ekYDTys8o/Gt2TMaS72e0UB0pWf010pJsLyr/83YXEhMD2+QcquvfVgCAIhpOXnvs0wOENJSckMsqwkiWkYO9i3qCQEtI9d9NBp8WkZuSyIPWmqdw9/zoCWfuvCEIy0pE22bcKClZaL6cVuayZFAwbaZZvKR1EDBuU00kw9OI3tGyq4bF9BqZgDT1QXaBlrLDABPqDBbT+szA8AxSTtuoY2ZAQxRQbZGM7k9pf2orW7Rkq06W6UtmQE8dkv3/9yt2TmakxmYX+dOblpAolG1Gc3LDOC8O/oFgKSSuzbOaG5m189fJAMAiQizQ0RUI8gM/HBF31ZuSjYpPTZIRGVV/MwA6tzQo+ymyYjpA2tmAKddyJXqXSx3rniZgasu6KPg23wZd/xD5H+uLY6l7xCVgmu49Awc6stGu9lHqV+270Zessj+xKXfuZKJdk5xrnrOpaO2cryWiIiaS4ioYpcw900ufSOPzJ3pEBHVTB8Q5T7JpU85yx1p1q+Zbcn9t5Q/IzmuRkda3WX+7Ccioh2m3G8FD3bcObO2NzLblPuigH6Yh6zt6Lzcc+UC+pxgNZSdoz1tmkPYPq/PfU/0pq+atcmc68+66Yn1by13pkHYRQadZcPMNxk25n4gblDHhbI6MerphV72vxDLnaqyOX3GBeusyRqdfXXI1E8u2fXVy06ZVXpqYI/+xsYp4PUKOzo0yZPbUqazzOru7UHLOW1srf12cIWzGodnzCcwXjXuc9hpAp8tmY2ykHYzdnAzF0LTfUaMbFK+528UjS4d1csU6MsUjabWRW01iIi6k0Wj6YKWWRkLotli0TRgkImo5X2x6BJrL2iJzReF5tb6npezHtFEFAh3X78bJL/88mu51T86g0pYDbi2wAAAAABJRU5ErkJggg=="},b4a8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("img",{attrs:{src:a("cf05")}}),n("el-form",{staticClass:"form-wrapper"},[n("el-form-item",[n("el-input",{attrs:{type:"email",placeholder:"请输入邮箱"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),n("el-form-item",[n("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}})],1),n("el-form-item",[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleLogin}},[t._v("\n      注册\n    ")]),n("el-divider"),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.$router.push("/login")}}},[t._v("\n      已有账号？去登录\n    ")])],1)],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},b65c:function(t,e,a){"use strict";a.r(e);var n=a("e62c"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},b729:function(t,e,a){},b770:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{class:t.svgClass,attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":t.iconName}})])},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},bac3:function(t,e,a){"use strict";a.r(e);var n=a("0c66"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},bc26:function(t,e,a){"use strict";a.r(e);var n=a("6ceb"),r=a("1c3a");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},bf49:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dashboardItem",{attrs:{dashboard:t.currentDashboard,mode:"view"}})],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},c00a:function(t,e,a){"use strict";a.r(e);var n=a("b770"),r=a("8c5f");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("30e0");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"09244364",null);e["default"]=s.exports},c223:function(t,e,a){"use strict";a.r(e);var n=a("bf49"),r=a("bac3");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},c24f:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.login=i,e.signup=o;var r=n(a("1c1e"));function i(t){return(0,r.default)({url:"/user/login",method:"POST",data:t})}function o(t){return(0,r.default)({url:"/user/signup",method:"POST",data:t})}},c638:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.createChart=i,e.updateChart=o,e.getChartById=s,e.deleteChart=l,e.chartList=c;var r=n(a("1c1e"));function i(t){return(0,r.default)({url:"/chart",method:"POST",data:t})}function o(t){return(0,r.default)({url:"/chart",method:"PUT",data:t})}function s(t){return(0,r.default)({url:"/chart?id=".concat(t)})}function l(t){return(0,r.default)({url:"/chart",method:"DELETE",data:t})}function c(){return(0,r.default)({url:"/chart/list"})}},c63d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("c24f"),r={data:function(){return{loading:!1,user:{userName:void 0,password:void 0}}},methods:{handleLogin:function(){var t=this;this.loading=!0,(0,n.login)(this.user).then(function(e){t.loading=!1,t.$store.dispatch("Login",e.data.token).then(function(){t.$router.push(t.$route.query.redirect||"/")})}).catch(function(){t.loading=!1})},useTestAccount:function(){this.user={userName:"dongsuo",password:"123456"}}}};e.default=r},c7a5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("c24f"),r={data:function(){return{loading:!1,user:{userName:void 0,password:void 0}}},methods:{handleLogin:function(){var t=this;this.loading=!0,(0,n.signup)(this.user).then(function(e){t.loading=!1,t.$message({type:"success",message:"注册成功，请登录"}),t.$router.push("/login")})}}};e.default=r},c937:function(t,e,a){"use strict";a.r(e);var n=a("eea6"),r=a("a3ce");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("8f49");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"21b47e45",null);e["default"]=s.exports},c980:function(t,e,a){},caed:function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-chart_table",use:"icon-chart_table-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-chart_table"><defs><style type="text/css"></style></defs><path d="M128 412.444h768v85.334H128z m0 199.112h768v85.333H128z" fill="#29C287" p-id="1693" /><path d="M113.778 184.889V839.11h796.444V184.89H113.778z m28.444 625.778v-512h227.556v512H142.222z m256 0v-512h256v512h-256z m483.556 0H682.667v-512h199.11v512z" fill="#706EE7" p-id="1694" /></symbol>'});o.a.add(s);e["default"]=s},ce25:function(t,e,a){"use strict";a.r(e);var n=a("5d0f"),r=a("6f09");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("a827");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"f8931762",null);e["default"]=s.exports},cf05:function(t,e){t.exports="data:image/png;base64,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"},d063:function(t,e,a){"use strict";a.r(e);var n=a("c7a5"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},d230:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac6a");var n=[{name:"表格",icon:"chart_table",type:"table",matchRule:{desc:"任意维度和数值",isUsable:function(t,e){return!0}},componentName:"DataTable",dataTransfer:function(t,e){return t}},{name:"折线图",icon:"chart_line",type:"line",matchRule:{desc:"1 或 2个维度;1或多个数值",isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=1}},componentName:"lineChart",dataTransfer:function(t,e){var a=t.map(function(t){var a={};return e.forEach(function(e){e.name=e.Column,e.lable=e.Column,e.asxAxis=e.isDimension,a[e.Column]=t[e.Column]}),a});return a}},{name:"柱状图",icon:"chart_bar",type:"bar",matchRule:{desc:"1 或 2个维度;1或多个数值",isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=1}},componentName:"BarChart",dataTransfer:function(t,e){var a=t.map(function(t){var a={};return e.forEach(function(e){e.name=e.Column,e.lable=e.Column,e.asxAxis=e.isDimension,a[e.Column]=t[e.Column]}),a});return a}},{name:"堆积柱状图",icon:"stack_bar",type:"stackBar",matchRule:{desc:"1 或 2个维度;2或多个数值",isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=2}},componentName:"StackBarChart",dataTransfer:function(t,e){var a=t.map(function(t){var a={};return e.forEach(function(e){e.name=e.Column,e.lable=e.Column,e.asxAxis=e.isDimension,a[e.Column]=t[e.Column]}),a});return a}},{name:"饼图",icon:"chart_pie",type:"pie",matchRule:{desc:"1个维度1个数值;0个维度多个数值",isUsable:function(t,e){return 1===t.length&&1===e.length||0===t.length&&e.length>=1}},componentName:"PieChart",dataTransfer:function(t,e){var a=t.map(function(t){var a={};return e.forEach(function(e){e.name=e.Column,e.lable=e.Column,e.asxAxis=e.isDimension,a[e.Column]=t[e.Column]}),a});return a}},{name:"条形图",icon:"horizontal_bar",type:"horizontalBar",matchRule:{desc:"1个维度;1或多个数值",isUsable:function(t,e){return(1===t.length||2===t.length)&&e.length>=1}},componentName:"HorizontalBar",dataTransfer:function(t,e){var a=t.map(function(t){var a={};return e.forEach(function(e){e.name=e.Column,e.lable=e.Column,e.asxAxis=e.isDimension,a[e.Column]=t[e.Column]}),a});return a}}],r=n;e.default=r},d346:function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-chart_pie_disabled",use:"icon-chart_pie_disabled-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-chart_pie_disabled"><defs><style type="text/css"></style></defs><path d="M483.556 540.444V145.067C292.978 159.289 142.222 318.577 142.222 512c0 204.8 164.978 369.778 369.778 369.778 193.422 0 352.711-150.756 366.933-341.334H483.556z" fill="#909399" p-id="2082" /><path d="M540.444 116.622v366.934h366.934C896 287.289 736.71 128 540.444 116.622z" fill="#909399" p-id="2083" /></symbol>'});o.a.add(s);e["default"]=s},d7a6:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("8615"),a("7f7f"),a("ac6a");var r=n(a("313e"));a("817d");var i={props:{data:{required:!0,default:function(){}},schema:{type:Array,required:!0},chartOpt:{type:Object,required:!1},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}},data:function(){return{chart:null}},watch:{data:{deep:!0,handler:function(t){this.renderChart(t)}},schema:{deep:!0,handler:function(){this.renderChart(this.data)}}},mounted:function(){this.renderChart(this.data),this.$on("resized",this.handleResize),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.chart&&this.chart.resize()},validateData:function(t){Array.isArray(t)||this.$message({message:"柱状图的数据格式必须为数组，请检查你的数据格式"})},renderChart:function(t){var e=this;if(this.$refs.chart){var a=[],n=[],i={};this.schema.forEach(function(e,r){a.push(e.label||e.name),e.asxAxis||(i[e.name]={name:e.label||e.name,data:[],stack:"All",type:"bar"}),t.forEach(function(t){e.asxAxis?n.push(t[e.name]):i[e.name].data.push(t[e.name])})});var o={legend:{type:"scroll",data:a,bottom:0},toolbox:{show:!0,top:0,itemSize:12,feature:{saveAsImage:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0},dataZoom:{show:!0}}},grid:{top:"10px",left:"80px",right:"0",bottom:"45px"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"category",axisLabel:{color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},data:n},yAxis:{axisLabel:{show:!0,color:"#95a4bd"},axisLine:{lineStyle:{color:"#95a4bd"}},splitLine:{lineStyle:{type:"dashed"}}},series:Object.values(i)};setTimeout(function(){e.chart||(e.chart=r.default.init(e.$refs.chart,"macarons")),e.chart.clear(),e.chart.setOption(o),e.chartOpt&&e.chart.setOption(e.chartOpt)},0)}}}};e.default=i},daaf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"SvgIcon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{iconName:function(){return"#icon-".concat(this.iconClass)},svgClass:function(){return this.className?"svg-icon "+this.className:"svg-icon"}}};e.default=n},df2e:function(t,e,a){"use strict";a.r(e);var n=a("e017"),r=a.n(n),i=a("21a1"),o=a.n(i),s=new r.a({id:"icon-chart_bar_disabled",use:"icon-chart_bar_disabled-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-chart_bar_disabled"><defs><style type="text/css"></style></defs><path d="M142.222 526.222h142.222v312.89H142.222z" fill="#909399" p-id="1951" /><path d="M341.333 184.889h142.223V839.11H341.333z" fill="#909399" p-id="1952" /><path d="M540.444 412.444h142.223v426.667H540.444z" fill="#909399" p-id="1953" /><path d="M739.556 611.556h142.222V839.11H739.556z" fill="#909399" p-id="1954" /></symbol>'});o.a.add(s);e["default"]=s},e0171:function(t,e,a){"use strict";var n=a("82ac"),r=a.n(n);r.a},e3a5:function(t,e,a){"use strict";a.r(e);var n=a("f866"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},e62c:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("20d6"),a("28a5"),a("ac6a");var r=n(a("310e")),i=n(a("f0ee")),o={components:{draggable:r.default},props:{value:{required:!0,type:Array}},data:function(){return{orderBy:[]}},computed:{allSelected:function(){return i.default.state.caculCols.concat(i.default.state.dimensions)},orderByStrs:{set:function(t){this.$emit("input",t)},get:function(){return this.value}},orderByOption:function(){return this.allSelected.map(function(t){return{value:t.Column,label:t.Column,children:[{value:"desc",label:"降序"},{value:"asc",label:"升序"}]}})}},watch:{"store.state.dimensions":function(t){this.watchHandler(t)},"store.state.caculCols":function(t){this.watchHandler(t)}},methods:{watchHandler:function(t){var e=this;this.orderByStrs.forEach(function(a,n){var r=a.split(" ")[0];t.findIndex(function(t){return t.Column===r})||e.orderByStrs.splice(n,1)})},handleOrderByChange:function(t){this.orderBy=[];var e=this.orderByStrs.findIndex(function(e){return e.indexOf(t[0])>=0});e>=0?this.orderByStrs.splice(e,1,"".concat(t[0]," ").concat(t[1])):this.orderByStrs.push("".concat(t[0]," ").concat(t[1]))},handleCloseOrderBy:function(t){this.orderByStrs.splice(this.orderByStrs.indexOf(t),1)}}};e.default=o},e7eb:function(t,e,a){"use strict";a.r(e);var n=a("d7a6"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},ec4a:function(t,e,a){"use strict";a.r(e);var n=a("1fac"),r=a("8a71");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},ed08:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.parseTime=i,a("a481"),a("6b54");var r=n(a("8993"));function i(t,e){if(0===arguments.length)return null;var a,n=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===(0,r.default)(t)?a=t:("string"===typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"===typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));var i={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},o=n.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){var a=i[e];return"a"===e?["日","一","二","三","四","五","六"][a]:(t.length>0&&a<10&&(a="0"+a),a||0)});return o}},edf6:function(t,e,a){"use strict";a.r(e);var n=a("ad96"),r=a("01c5");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("7132");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"334c70a6",null);e["default"]=s.exports},eea6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container"},[a("el-card",{staticClass:"dashboard-list",attrs:{"body-style":"padding: 0px;",shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("仪表盘")]),a("i",{staticClass:"el-icon-plus",on:{click:t.addDashboard}})]),a("ul",[a("draggable",{staticClass:"draggable-wrapper",attrs:{group:{name:"dashboard",pull:!0}},on:{change:t.handleOrderChange},model:{value:t.dashboardList,callback:function(e){t.dashboardList=e},expression:"dashboardList"}},t._l(t.dashboardList,function(e){return a("li",{key:e.objectId,class:{"dashboard-list-item":!0,"high-light-dashboard":t.currentDashboard.objectId===e.objectId}},[a("span",{on:{click:function(a){return t.switchDb(e)}}},[a("i",{staticClass:"el-icon-document"}),a("span",[t._v(t._s(e.name))])]),a("el-dropdown",{attrs:{szie:"mini",trigger:"click"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{type:"edit",target:e}}},[t._v("\n                编辑\n              ")]),a("el-dropdown-item",{attrs:{command:{type:"delete",target:e}}},[t._v("\n                删除\n              ")])],1)],1)],1)}),0)],1)]),a("dashboardItem",{attrs:{dashboard:t.currentDashboard,mode:"edit"}}),a("el-dialog",{attrs:{title:"编辑/新建看板",visible:t.editDialogVisible},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{attrs:{"label-width":"100px;"}},[a("el-form-item",{attrs:{label:" 看板名称："}},[a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入看板名称"},model:{value:t.dbObj.name,callback:function(e){t.$set(t.dbObj,"name",e)},expression:"dbObj.name"}})],1),a("el-form-item",{attrs:{label:" 看板描述："}},[a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请输入描述"},model:{value:t.dbObj.desc,callback:function(e){t.$set(t.dbObj,"desc",e)},expression:"dbObj.desc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleSubmit}},[t._v("确定")])],1)],1)],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},f0ee:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("20d6");var n=a("a5e0"),r=a("aa35"),i={debug:!1,state:{dimensions:[],caculCols:[],allCols:[]},addDimensionAction:function(t){this.debug&&console.log("adddimensionAction triggered with",t),t.isDimension=!0},deleteDimensionAction:function(t){this.debug&&console.log("deleteDimensionAction triggered with",t);var e=this.state.dimensions.findIndex(function(e){return e.Column===t.Column});this.state.dimensions[e].isDimension=!1,this.state.dimensions.splice(e,1)},setDimensionsAction:function(t){this.debug&&console.log("setDimensionsAction triggered"),this.state.dimensions=t},addCaculColAction:function(t){this.debug&&console.log("addCaculColAction triggered with",t);var e=(0,n.trimColType)(t.Type),a=this.state.caculCols.findIndex(function(e){return e.Column===t.Column}),i={Column:t.Column,calculFunc:e.availableFunc[0],Type:t.Type,availableFunc:e.availableFunc.map(function(t){return{name:r.sqlFunc[t],func:t}})};this.state.caculCols.splice(a,1,i)},deleteCaculColAction:function(t){this.debug&&console.log("deleteCaculColAction triggered with",t);var e=this.state.caculCols.findIndex(function(e){return e.Column===t.Column});this.state.caculCols.splice(e,1)},setCaculColsAction:function(t){this.debug&&console.log("setCaculColsAction triggered"),this.state.caculCols=t},setAllColsAction:function(t){this.debug&&console.log("setAllColsAction triggered width",t),this.state.allCols=t}},o=i;e.default=o},f311:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.token&&t.showNavBar()?n("div",{staticClass:"nav-bar"},[n("el-menu",{attrs:{"default-active":t.activeMenu,router:!0,mode:"horizontal","background-color":"#fff","text-color":"#606266","active-text-color":"#409EFF"}},[n("el-menu-item",{attrs:{index:"/"}},[n("img",{staticStyle:{height:"45px"},attrs:{src:a("b23d")}})]),n("el-menu-item",{attrs:{index:"/dashboard"}},[t._v("\n        仪表盘\n      ")]),n("el-menu-item",{attrs:{index:"/chartpanel/create"}},[t._v("\n        图表\n      ")])],1),n("el-dropdown",{staticClass:"avatar-container right-menu-item",attrs:{szie:"mini",trigger:"hover"}},[n("div",{staticClass:"avatar-wrapper"},[n("img",{staticClass:"user-avatar",attrs:{src:t.avatar+"?imageView2/1/w/80/h/80"}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("router-link",{attrs:{to:"/"}},[n("el-dropdown-item",[t._v("\n            首页\n          ")])],1),n("el-dropdown-item",{attrs:{divided:""}},[n("span",{staticStyle:{display:"block"},on:{click:t.logout}},[t._v("退出登录")])])],1)],1)],1):t._e(),n("router-view")],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},f77d:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=n(a("1c1e"));function i(t){return(0,r.default)({url:"/exesql?sql=".concat(t)})}},f866:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{data:{type:Array,default:function(){return[]}},schema:{type:Array,default:function(){return[]}},chartStyle:{require:!1,type:Object,default:function(){return{height:"500px"}}}}};e.default=n},f986:function(t,e,a){"use strict";a.r(e);var n=a("5757"),r=a("067a");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("e0171");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"5aa248f1",null);e["default"]=s.exports},fb0f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{style:t.chartStyle,attrs:{data:t.data,height:t.chartStyle.height,"highlight-current-row":"",border:"",stripe:"","header-cell-style":{padding:"5px 0"},"cell-style":{padding:"5px 0"}}},t._l(t.schema,function(t){return a("el-table-column",{key:t.Column,attrs:{prop:t.Column,label:t.Column,align:"center"}})}),1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},fec3:function(t,e,a){"use strict";a.r(e);var n=a("1d04"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},fec5:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("7f7f"),a("7514"),a("ac6a");var r=n(a("310e")),i=n(a("ce25")),o=a("5fd4"),s={components:{dashboardItem:i.default,draggable:r.default},data:function(){return{dashboardList:[],currentDashboard:void 0,editDialogVisible:!1,dbObj:{},loading:!1,isCollapse:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,(0,o.dashboardList)().then(function(e){t.loading=!1,t.dashboardList=[],e.data.order.forEach(function(a){t.dashboardList.push(e.data.dashboards.find(function(t){return t.objectId===a}))});var a=t.dashboardList.find(function(e){return e.objectId===t.$route.query.id});t.currentDashboard=a||t.dashboardList[0],t.currentDashboard&&t.$router.push("/dashboard?id=".concat(t.currentDashboard.objectId))})},switchDb:function(t){t.objectId!==this.currentDashboard.objectId?(this.currentDashboard=t,this.$router.push("/dashboard?id=".concat(this.currentDashboard.objectId))):this.getList()},addDashboard:function(){this.dbObj={},this.editDialogVisible=!0},editDashboard:function(t){this.dbObj=Object.assign({},t),this.editDialogVisible=!0},handleCommand:function(t){"edit"===t.type?this.editDashboard(t.target):this.deleteDashboard(t.target)},handleSubmit:function(){var t=this;this.dbObj.objectId?(0,o.updateDashboard)(this.dbObj).then(function(e){t.getList(),t.editDialogVisible=!1}):(0,o.addDashboard)(this.dbObj).then(function(e){t.getList(),t.editDialogVisible=!1})},handleOrderChange:function(t){var e={order:this.dashboardList.map(function(t){return t.objectId})};(0,o.dbOrder)(e).then(function(){console.log("order")})},deleteDashboard:function(t){var e=this;this.$confirm("确定要删除".concat(t.name,"仪表盘吗？"),"提示").then(function(){(0,o.deleteDashboard)({id:t.objectId}).then(function(){e.getList(),e.$message({type:"success",message:"删除成功！"})})})}}};e.default=s}});
//# sourceMappingURL=app.80276a37.js.map